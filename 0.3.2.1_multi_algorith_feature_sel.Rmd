---
title: "03.2.1_multi_algorith_feature_sel"
author: "Puvvula"
date: "2023-03-29"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
# Load necessary packages
library(tidyverse)
library(caret)
library(mlr)
library(ranger)
library(glmnet)
library(Boruta)
library(party)
library(deepnet)
library(rminer)
```

```{r}
dat<- read.csv("/Users/jpuvvula/Documents/data/home_16w_imp/mirec_transf/home_all_first_trimes/any_outcome/home_1trim_any_outc.csv") |>
  drop_na()
```


```{r}

# Function to perform feature selection and return results
feature_selection <- function(data, vars, outcome, seed = NULL, group_vars = NULL) {
  
  # Create a data frame to store results
  results <- data.frame(variable = vars)
  
  # Recursive Feature Elimination
  rfe_model <- rfe(x = as.matrix(data[, vars]), y = data[, outcome], sizes = c(2:length(vars)), rfeControl = rfeControl(method = "cv", number = 5), verbose = FALSE)
  rfe_importance <- rfe_model$optVariables
  results$rfe_importance <- as.numeric(vars %in% rfe_importance)

  return(results)
}
```


```{r}
# Generate simulated dataset with 10 variables and 100 observations
set.seed(123)
data <- data.frame(matrix(rnorm(1100), ncol = 11))
colnames(data) <- c(paste0("var", 1:10), "outcome")
outcome <- rnorm(100)
group <- rep(1:2, each = 5)

results <- feature_selection(data, colnames(data), "outcome", seed = 123, group = group)
```

